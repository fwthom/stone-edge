<link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<div class="home-banner">
  <div class="text-container">
    <div class="top-line">
      <h1 class="static-top">Trouvez un</h1>
      <div class="dynamic-text-wrapper">
        <span id="dynamic-text" class="dynamic-text">caillou rigolo</span>
      </div>
    </div>
    <h2 class="static-bottom">pr√®s de chez vous</h2>
  </div>
  <div class="button-container">
    <% unless user_signed_in? %>
  <a href="/users/sign_up" class="action-button">S'inscrire</a>
    <% end %>
    <a href="/stones" class="action-button">Voir la collection</a>
  </div>
</div>
<div class="home-container my-2">
  <h2 style="font-family: 'Chakra Petch', sans-serif;">Les derniers ajouts</h2>

  <div id="stonesCarousel" class="carousel slide custom-carousel" data-bs-ride="carousel">
    <!-- Carousel Items -->
    <div class="carousel-inner custom-carousel-inner">
      <% Stone.order(created_at: :desc).each_slice(4).with_index do |stones, index| %>
        <div class="carousel-item <%= 'active' if index.zero? %>">
          <div class="custom-carousel-row">
            <% stones.each do |stone| %>
              <div class="custom-card mx-2">
                <% if stone.photo.attached? %>
                  <%= cl_image_tag stone.photo.key, class: "custom-card-img", alt: stone.name %>
                <% else %>
                  <%= image_tag "rocky.png", class: "custom-card-img", alt: "Placeholder" %>
                <% end %>
                <div class="custom-card-body">
                  <h5 class="custom-card-title"><%= stone.name %></h5>
                  <p class="custom-card-text"><%= stone.backstory %></p>
                  <p class="custom-card-text"><strong>Price:</strong> <%= number_to_currency(stone.daily_price) %></p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Carousel Controls -->
    <button class="carousel-control-prev custom-carousel-control" type="button" data-bs-target="#stonesCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next custom-carousel-control" type="button" data-bs-target="#stonesCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</div>




<script>
  document.addEventListener('DOMContentLoaded', () => {
    const options = <%= @dynamic_options.to_json.html_safe %>;
    const dynamicText = document.getElementById('dynamic-text');
    let index = 0;

    function updateText() {
      dynamicText.classList.remove('rotate-in', 'rotate-out'); // Reset animations
      dynamicText.classList.add('rotate-out'); // Add rotate-out animation
      setTimeout(() => {
        index = (index + 1) % options.length; // Update to the next option
        dynamicText.textContent = options[index]; // Set new text
        dynamicText.classList.remove('rotate-out'); // Reset rotate-out
        dynamicText.classList.add('rotate-in'); // Add rotate-in animation
      }, 500); // Match animation duration
    }

    setInterval(updateText, 3000); // Change text every 3 seconds
  });
</script>
